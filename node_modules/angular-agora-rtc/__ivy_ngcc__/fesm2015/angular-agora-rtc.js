import { Injectable, Inject, NgModule, Component, defineInjectable, inject } from '@angular/core';
import { checkSystemRequirements, getDevices, createClient, createStream, Logger } from 'agora-rtc-sdk';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function AgoraLocalComponent_i_4_Template(rf, ctx) { if (rf & 1) {
    const _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 8);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.startCall(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 11);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_1_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.leave(); });
    ɵngcc0.ɵɵtext(1, "phone");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_2_Template(rf, ctx) { if (rf & 1) {
    const _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_2_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_3_Template(rf, ctx) { if (rf & 1) {
    const _r15 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_3_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_4_Template(rf, ctx) { if (rf & 1) {
    const _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_5_Template(rf, ctx) { if (rf & 1) {
    const _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_5_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(2); return ctx_r18.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, AgoraLocalComponent_ng_container_5_i_1_Template, 2, 0, "i", 9);
    ɵngcc0.ɵɵtemplate(2, AgoraLocalComponent_ng_container_5_i_2_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(3, AgoraLocalComponent_ng_container_5_i_3_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_ng_container_5_i_4_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_i_5_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.activeCall);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.videoEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.videoEnabled);
} }
function AgoraLocalComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 13);
} if (rf & 2) {
    const remote_r20 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("id", remote_r20);
} }
class AgoraConfig {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AngularAgoraRtcService {
    /**
     * @param {?} config
     */
    constructor(config) {
        this.config = config;
        if (!this.checkSystemRequirements()) {
            this.logger('error', 'Web RTC is not supported');
        }
        else {
            this.getDevices();
        }
    }
    /**
     * @return {?}
     */
    checkSystemRequirements() {
        return checkSystemRequirements();
    }
    /**
     * @return {?}
     */
    getDevices() {
        getDevices((devices) => {
            /** @type {?} */
            let audioDevices = devices.filter(device => {
                return device.kind === 'audioinput' && device.deviceId !== 'default';
            });
            /** @type {?} */
            let videoDevices = devices.filter(device => {
                return device.kind === 'videoinput' && device.deviceId !== 'default';
            });
            this.audioDevices = audioDevices;
            this.videoDevices = videoDevices;
        });
    }
    /**
     * @param {?=} mode
     * @return {?}
     */
    createClient(mode = 'interop') {
        this.client = createClient({ mode: mode });
        this.client.init(this.config.AppID);
    }
    /**
     * @param {?} streamID
     * @param {?} audio
     * @param {?=} cameraId
     * @param {?=} microphoneId
     * @param {?=} video
     * @param {?=} screen
     * @return {?}
     */
    createStream(streamID, audio, cameraId = this.videoDevices[0].deviceId, microphoneId = this.audioDevices[0].deviceId, video, screen) {
        return createStream({ streamID, audio, cameraId, microphoneId, video, screen });
    }
    /**
     * @param {?} type
     * @param {?} message
     * @return {?}
     */
    logger(type, message) {
        switch (type) {
            case 'error':
                Logger.error(message);
                break;
            case 'warning':
                Logger.warning(message);
                break;
            case 'info':
                Logger.info(message);
                break;
            case 'debug':
                Logger.debug(message);
                break;
            default:
                Logger.error(message);
        }
    }
}
AngularAgoraRtcService.ɵfac = function AngularAgoraRtcService_Factory(t) { return new (t || AngularAgoraRtcService)(ɵngcc0.ɵɵinject('config')); };
AngularAgoraRtcService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: AngularAgoraRtcService, factory: AngularAgoraRtcService.ɵfac, providedIn: 'root' });
/** @nocollapse */
AngularAgoraRtcService.ctorParameters = () => [
    { type: AgoraConfig, decorators: [{ type: Inject, args: ['config',] }] }
];
/** @nocollapse */ AngularAgoraRtcService.ngInjectableDef = defineInjectable({ factory: function AngularAgoraRtcService_Factory() { return new AngularAgoraRtcService(inject("config")); }, token: AngularAgoraRtcService, providedIn: "root" });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: AgoraConfig, decorators: [{
                type: Inject,
                args: ['config']
            }] }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AgoraLocalComponent {
    /**
     * @param {?} agoraService
     */
    constructor(agoraService) {
        this.agoraService = agoraService;
        this.activeCall = false;
        this.audioEnabled = true;
        this.videoEnabled = true;
        this.remoteCalls = [];
        this.agoraService.createClient();
    }
    /**
     * @return {?}
     */
    startCall() {
        this.activeCall = true;
        this.agoraService.client.join(null, '1000', null, (uid) => {
            this.localStream = this.agoraService.createStream(uid, true, null, null, true, false);
            this.localStream.setVideoProfile('720p_3');
            this.subscribeToStreams();
        });
    }
    /**
     * @return {?}
     */
    subscribeToStreams() {
        this.localStream.on("accessAllowed", () => {
            console.log("accessAllowed");
        });
        // The user has denied access to the camera and mic.
        this.localStream.on("accessDenied", () => {
            console.log("accessDenied");
        });
        this.localStream.init(() => {
            console.log("getUserMedia successfully");
            this.localStream.play('agora_local');
            this.agoraService.client.publish(this.localStream, function (err) {
                console.log("Publish local stream error: " + err);
            });
            this.agoraService.client.on('stream-published', function (evt) {
                console.log("Publish local stream successfully");
            });
        }, function (err) {
            console.log("getUserMedia failed", err);
        });
        this.agoraService.client.on('error', (err) => {
            console.log("Got error msg:", err.reason);
            if (err.reason === 'DYNAMIC_KEY_TIMEOUT') {
                this.agoraService.client.renewChannelKey("", () => {
                    console.log("Renew channel key successfully");
                }, (err) => {
                    console.log("Renew channel key failed: ", err);
                });
            }
        });
        this.agoraService.client.on('stream-added', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            this.agoraService.client.subscribe(stream, (err) => {
                console.log("Subscribe stream failed", err);
            });
        });
        this.agoraService.client.on('stream-subscribed', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            if (!this.remoteCalls.includes(`agora_remote${stream.getId()}`))
                this.remoteCalls.push(`agora_remote${stream.getId()}`);
            setTimeout(() => stream.play(`agora_remote${stream.getId()}`), 2000);
        });
        this.agoraService.client.on('stream-removed', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            stream.stop();
            this.remoteCalls = this.remoteCalls.filter(call => call !== `#agora_remote${stream.getId()}`);
            console.log(`Remote stream is removed ${stream.getId()}`);
        });
        this.agoraService.client.on('peer-leave', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            if (stream) {
                stream.stop();
                this.remoteCalls = this.remoteCalls.filter(call => call === `#agora_remote${stream.getId()}`);
                console.log(`${evt.uid} left from this channel`);
            }
        });
    }
    /**
     * @return {?}
     */
    leave() {
        this.agoraService.client.leave(() => {
            this.activeCall = false;
            document.getElementById('agora_local').innerHTML = "";
            console.log("Leavel channel successfully");
        }, (err) => {
            console.log("Leave channel failed");
        });
    }
    /**
     * @return {?}
     */
    toggleAudio() {
        this.audioEnabled = !this.audioEnabled;
        if (this.audioEnabled)
            this.localStream.enableAudio();
        else
            this.localStream.disableAudio();
    }
    /**
     * @return {?}
     */
    toggleVideo() {
        this.videoEnabled = !this.videoEnabled;
        if (this.videoEnabled)
            this.localStream.enableVideo();
        else
            this.localStream.disableVideo();
    }
}
AgoraLocalComponent.ɵfac = function AgoraLocalComponent_Factory(t) { return new (t || AgoraLocalComponent)(ɵngcc0.ɵɵdirectiveInject(AngularAgoraRtcService)); };
AgoraLocalComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AgoraLocalComponent, selectors: [["agora-rtc"]], decls: 8, vars: 3, consts: [[1, "video-container"], [1, "call-container"], [1, "agora_local"], [1, "video-buttons"], ["class", "startCall material-icons", 3, "click", 4, "ngIf"], [4, "ngIf"], ["id", "agora_local"], ["class", "agora_remote", 3, "id", 4, "ngFor", "ngForOf"], [1, "startCall", "material-icons", 3, "click"], ["class", "endCall material-icons", 3, "click", 4, "ngIf"], ["class", "mic material-icons", 3, "click", 4, "ngIf"], [1, "endCall", "material-icons", 3, "click"], [1, "mic", "material-icons", 3, "click"], [1, "agora_remote", 3, "id"]], template: function AgoraLocalComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelement(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_i_4_Template, 2, 0, "i", 4);
        ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_Template, 6, 5, "ng-container", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(6, "div", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(7, AgoraLocalComponent_div_7_Template, 1, 1, "div", 7);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.activeCall);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.activeCall);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.remoteCalls);
    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf], styles: ["@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p[_ngcontent-%COMP%]{font-family:Lato}.video-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local[_ngcontent-%COMP%]{height:250px;width:250px;top:-28px}.agora_remote[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons[_ngcontent-%COMP%]{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.endCall[_ngcontent-%COMP%]{color:red}.mic[_ngcontent-%COMP%], .startCall[_ngcontent-%COMP%]{color:#fff}"] });
/** @nocollapse */
AgoraLocalComponent.ctorParameters = () => [
    { type: AngularAgoraRtcService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AgoraLocalComponent, [{
        type: Component,
        args: [{
                selector: 'agora-rtc',
                template: `<div class="video-container">
	<div class="call-container">
	</div>
	<div class="agora_local">
		<div class="video-buttons">
			<i class="startCall material-icons" (click)="startCall()" *ngIf="!activeCall">videocam</i>
			<ng-container *ngIf="activeCall">
				<i class="endCall material-icons" (click)="leave()" *ngIf="activeCall">phone</i>

				<i class="mic material-icons" (click)="toggleAudio()" *ngIf="audioEnabled">mic</i>
				<i class="mic material-icons" (click)="toggleAudio()" *ngIf="!audioEnabled">mic_off</i>

				<i class="mic material-icons" (click)="toggleVideo()" *ngIf="videoEnabled">videocam</i>
				<i class="mic material-icons" (click)="toggleVideo()" *ngIf="!videoEnabled">videocam_off</i>
			</ng-container>
		</div>
		<div id="agora_local"></div>
	</div>
	<div class="agora_remote" *ngFor="let remote of remoteCalls" [id]="remote">

	</div>
</div>`,
                styles: [`@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p{font-family:Lato}.video-container{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local{height:250px;width:250px;top:-28px}.agora_remote{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons i{cursor:pointer}.endCall{color:red}.mic,.startCall{color:#fff}`]
            }]
    }], function () { return [{ type: AngularAgoraRtcService }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AngularAgoraRtcModule {
    /**
     * @param {?} config
     * @return {?}
     */
    static forRoot(config) {
        return {
            ngModule: AngularAgoraRtcModule,
            providers: [AngularAgoraRtcService, { provide: 'config', useValue: config }]
        };
    }
}
AngularAgoraRtcModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularAgoraRtcModule });
AngularAgoraRtcModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularAgoraRtcModule_Factory(t) { return new (t || AngularAgoraRtcModule)(); }, imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AngularAgoraRtcModule, { declarations: function () { return [AgoraLocalComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [AgoraLocalComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [AgoraLocalComponent],
                exports: [AgoraLocalComponent]
            }]
    }], null, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AgoraClient {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Stream {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Device {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { AngularAgoraRtcService, AgoraLocalComponent, AngularAgoraRtcModule, AgoraClient, Stream, Device, AgoraConfig };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1hZ29yYS1ydGMuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvQWdvcmFDb25maWcudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2FuZ3VsYXItYWdvcmEtcnRjLnNlcnZpY2UudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2Fnb3JhLWxvY2FsLmNvbXBvbmVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvYW5ndWxhci1hZ29yYS1ydGMubW9kdWxlLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9BZ29yYUNsaWVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvU3RyZWFtLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9EZXZpY2UudHMiXSwibmFtZXMiOlsiQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMiLCJBZ29yYVJUQy5nZXREZXZpY2VzIiwiQWdvcmFSVEMuY3JlYXRlQ2xpZW50IiwiQWdvcmFSVEMuY3JlYXRlU3RyZWFtIiwiQWdvcmFSVEMuTG9nZ2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLHFCQUVDOzs7cUJDRkQ7OEJBZ0JFLFlBQzRCO0tBQWtCLFlBQWxCLFdBQU0sR0FBTixNQUFNO0FBQVksU0FFNUMsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLGNBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLDBCQUEwQixDQUFDLENBQUMsVUFDbEQsY0FBSyxjQUNKLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxVQUNuQixNQUNGOzRCQUVEO2lCQUF1QjtHQUNyQjtNQUFPQSx1QkFBZ0MsRUFBRSxDQUFDLE1BQzNDLHdDQUVPO01BQVUsYUFDaEJDLFVBQW1CLENBQUMsQ0FBQyxPQUFPOztHQUMxQixJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sc0JBQ3RDLE9BQU8sTUFBTSxD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QUFPO0FBQ1gsWUFBTSxRQUFRLEVBQUUscUJBQXFCO0FBQ3JDLFlBQU0sU0FBUyxFQUFFLENBQUMsc0JBQXNCLEVBQUUsRUFBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUMsQ0FBQztBQUNoRixTQUFLLENBQUM7QUFDTixLQUFHO0FBQ0g7aURBZEMsUUFBUSxTQUFDLGtCQUNSO0lBQU8sRUFBRSxzQkFDUCxZQUFZLGtCQUNiLGtCQUNELFlBQVksRUFBRSxDQUFDLG1CQUFtQixDQUFDLGtCQUNuQyxPQUFPLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQztPQUMvQjs7Ozs7Ozs7Ozs7OzBCQUNLO0FBQUM7QUFBQztBQUFJO0FBQ0g7QUFBeUM7QUNkbEQ7QUFBb0IsQ0FrQ2pCO0FBQUM7QUFBQztBQUFJO0FBQWtDO0FBQXlDO0FDbENwRjtBQUFlLENBeURkO0FBQUM7QUFBQztBQUFJO0FBQWtDO0FBQXlDO0FDekRsRjtBQUFlLENBS2Q7QUFBQztBQUFDO0FBQUk7QUFBa0M7QUFBeUM7QUFBSTtBQUFDO0FBQUk7QUFBa0M7QUFBeUM7QUFBSTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFnb3JhQ29uZmlne1xuICAgIEFwcElEOnN0cmluZztcbn0iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIEFnb3JhUlRDIGZyb20gJ2Fnb3JhLXJ0Yy1zZGsnO1xuaW1wb3J0IHsgU3ViamVjdCwgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBBZ29yYUNvbmZpZyB9IGZyb20gJy4vQWdvcmFDb25maWcnO1xuaW1wb3J0IHsgQWdvcmFDbGllbnQgfSBmcm9tICcuL0Fnb3JhQ2xpZW50JztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckFnb3JhUnRjU2VydmljZSB7XG5cbiAgcHVibGljIGF1ZGlvRGV2aWNlczogYW55W107XG4gIHB1YmxpYyB2aWRlb0RldmljZXM6IGFueVtdO1xuXG4gIHB1YmxpYyBjbGllbnQ6IEFnb3JhQ2xpZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoJ2NvbmZpZycpIHByaXZhdGUgY29uZmlnOkFnb3JhQ29uZmlnXG4gICkge1xuICAgIGlmICghdGhpcy5jaGVja1N5c3RlbVJlcXVpcmVtZW50cygpKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCAnV2ViIFJUQyBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfSBlbHNle1xuICAgICAgdGhpcy5nZXREZXZpY2VzKCk7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSB7XG4gICAgcmV0dXJuIEFnb3JhUlRDLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldERldmljZXMoKSB7XG4gICAgQWdvcmFSVEMuZ2V0RGV2aWNlcygoZGV2aWNlcykgPT4ge1xuICAgICAgbGV0IGF1ZGlvRGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGRldmljZSA9PiB7XG4gICAgICAgIHJldHVybiBkZXZpY2Uua2luZCA9PT0gJ2F1ZGlvaW5wdXQnICYmIGRldmljZS5kZXZpY2VJZCAhPT0gJ2RlZmF1bHQnXG4gICAgICB9KTtcbiAgICAgIGxldCB2aWRlb0RldmljZXMgPSBkZXZpY2VzLmZpbHRlcihkZXZpY2UgPT4ge1xuICAgICAgICByZXR1cm4gZGV2aWNlLmtpbmQgPT09ICd2aWRlb2lucHV0JyAmJiBkZXZpY2UuZGV2aWNlSWQgIT09ICdkZWZhdWx0J1xuICAgICAgfSk7XG4gICAgICB0aGlzLmF1ZGlvRGV2aWNlcyA9IGF1ZGlvRGV2aWNlcztcbiAgICAgIHRoaXMudmlkZW9EZXZpY2VzID0gdmlkZW9EZXZpY2VzO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlQ2xpZW50KG1vZGU6IHN0cmluZyA9ICdpbnRlcm9wJykge1xuICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7IG1vZGU6IG1vZGUgfSk7XG4gICAgIHRoaXMuY2xpZW50LmluaXQodGhpcy5jb25maWcuQXBwSUQpO1xuICB9XG5cbiAgY3JlYXRlU3RyZWFtKHN0cmVhbUlEOiBhbnksIGF1ZGlvOiBib29sZWFuLCBjYW1lcmFJZDogc3RyaW5nID0gdGhpcy52aWRlb0RldmljZXNbMF0uZGV2aWNlSWQsIG1pY3JvcGhvbmVJZDogc3RyaW5nID0gdGhpcy5hdWRpb0RldmljZXNbMF0uZGV2aWNlSWQsIHZpZGVvOiBib29sZWFuLCBzY3JlZW46IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gQWdvcmFSVEMuY3JlYXRlU3RyZWFtKHtzdHJlYW1JRCwgYXVkaW8sIGNhbWVyYUlkLCBtaWNyb3Bob25lSWQsIHZpZGVvLCBzY3JlZW59KTtcbiAgfVxuXG4gIGxvZ2dlcih0eXBlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICBBZ29yYVJUQy5Mb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgIEFnb3JhUlRDLkxvZ2dlci53YXJuaW5nKG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICBBZ29yYVJUQy5Mb2dnZXIuaW5mbyhtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWJ1Zyc6XG4gICAgICAgIEFnb3JhUlRDLkxvZ2dlci5kZWJ1ZyhtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBBZ29yYVJUQy5Mb2dnZXIuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFuZ3VsYXJBZ29yYVJ0Y1NlcnZpY2UgfSBmcm9tICcuL2FuZ3VsYXItYWdvcmEtcnRjLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi9TdHJlYW0nO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhZ29yYS1ydGMnLFxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJ2aWRlby1jb250YWluZXJcIj5cblx0PGRpdiBjbGFzcz1cImNhbGwtY29udGFpbmVyXCI+XG5cdDwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwiYWdvcmFfbG9jYWxcIj5cblx0XHQ8ZGl2IGNsYXNzPVwidmlkZW8tYnV0dG9uc1wiPlxuXHRcdFx0PGkgY2xhc3M9XCJzdGFydENhbGwgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwic3RhcnRDYWxsKClcIiAqbmdJZj1cIiFhY3RpdmVDYWxsXCI+dmlkZW9jYW08L2k+XG5cdFx0XHQ8bmctY29udGFpbmVyICpuZ0lmPVwiYWN0aXZlQ2FsbFwiPlxuXHRcdFx0XHQ8aSBjbGFzcz1cImVuZENhbGwgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwibGVhdmUoKVwiICpuZ0lmPVwiYWN0aXZlQ2FsbFwiPnBob25lPC9pPlxuXG5cdFx0XHRcdDxpIGNsYXNzPVwibWljIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cInRvZ2dsZUF1ZGlvKClcIiAqbmdJZj1cImF1ZGlvRW5hYmxlZFwiPm1pYzwvaT5cblx0XHRcdFx0PGkgY2xhc3M9XCJtaWMgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwidG9nZ2xlQXVkaW8oKVwiICpuZ0lmPVwiIWF1ZGlvRW5hYmxlZFwiPm1pY19vZmY8L2k+XG5cblx0XHRcdFx0PGkgY2xhc3M9XCJtaWMgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwidG9nZ2xlVmlkZW8oKVwiICpuZ0lmPVwidmlkZW9FbmFibGVkXCI+dmlkZW9jYW08L2k+XG5cdFx0XHRcdDxpIGNsYXNzPVwibWljIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cInRvZ2dsZVZpZGVvKClcIiAqbmdJZj1cIiF2aWRlb0VuYWJsZWRcIj52aWRlb2NhbV9vZmY8L2k+XG5cdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8L2Rpdj5cblx0XHQ8ZGl2IGlkPVwiYWdvcmFfbG9jYWxcIj48L2Rpdj5cblx0PC9kaXY+XG5cdDxkaXYgY2xhc3M9XCJhZ29yYV9yZW1vdGVcIiAqbmdGb3I9XCJsZXQgcmVtb3RlIG9mIHJlbW90ZUNhbGxzXCIgW2lkXT1cInJlbW90ZVwiPlxuXG5cdDwvZGl2PlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYEBpbXBvcnQgdXJsKGh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMpO3B7Zm9udC1mYW1pbHk6TGF0b30udmlkZW8tY29udGFpbmVye2hlaWdodDoxMDB2aDtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmFnb3JhX2xvY2Fse2JhY2tncm91bmQtY29sb3I6IzQwNDA0MDtoZWlnaHQ6MjUwcHg7d2lkdGg6MjUwcHg7Ym9yZGVyOjFweCBzb2xpZCAjMDAwO21hcmdpbjo4cHh9I2Fnb3JhX2xvY2Fse2hlaWdodDoyNTBweDt3aWR0aDoyNTBweDt0b3A6LTI4cHh9LmFnb3JhX3JlbW90ZXtiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7aGVpZ2h0OjI1MHB4O3dpZHRoOjI1MHB4O2JvcmRlcjoxcHggc29saWQgIzAwMDttYXJnaW46OHB4fS52aWRlby1idXR0b25ze3dpZHRoOjI1MHB4O3RvcDoyMTBweDtwb3NpdGlvbjpyZWxhdGl2ZTt0ZXh0LWFsaWduOmNlbnRlcjt6LWluZGV4Ojk5OX0udmlkZW8tYnV0dG9ucyBpe2N1cnNvcjpwb2ludGVyfS5lbmRDYWxse2NvbG9yOnJlZH0ubWljLC5zdGFydENhbGx7Y29sb3I6I2ZmZn1gXVxufSlcbmV4cG9ydCBjbGFzcyBBZ29yYUxvY2FsQ29tcG9uZW50IHtcblxuICBhY3RpdmVDYWxsOiBib29sZWFuID0gZmFsc2U7XG4gIGF1ZGlvRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG4gIHZpZGVvRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG4gIGxvY2FsU3RyZWFtOiBTdHJlYW1cbiAgcmVtb3RlQ2FsbHM6IGFueSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYWdvcmFTZXJ2aWNlOiBBbmd1bGFyQWdvcmFSdGNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNyZWF0ZUNsaWVudCgpO1xuICB9XG5cbiAgc3RhcnRDYWxsKCkge1xuICAgIHRoaXMuYWN0aXZlQ2FsbCA9IHRydWU7XG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50LmpvaW4obnVsbCwgJzEwMDAnLCBudWxsLCAodWlkKSA9PiB7XG4gICAgICB0aGlzLmxvY2FsU3RyZWFtID0gdGhpcy5hZ29yYVNlcnZpY2UuY3JlYXRlU3RyZWFtKHVpZCwgdHJ1ZSwgbnVsbCwgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgdGhpcy5sb2NhbFN0cmVhbS5zZXRWaWRlb1Byb2ZpbGUoJzcyMHBfMycpO1xuICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0cmVhbXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlVG9TdHJlYW1zKCkge1xuICAgIHRoaXMubG9jYWxTdHJlYW0ub24oXCJhY2Nlc3NBbGxvd2VkXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiYWNjZXNzQWxsb3dlZFwiKTtcbiAgICB9KTtcbiAgICAvLyBUaGUgdXNlciBoYXMgZGVuaWVkIGFjY2VzcyB0byB0aGUgY2FtZXJhIGFuZCBtaWMuXG4gICAgdGhpcy5sb2NhbFN0cmVhbS5vbihcImFjY2Vzc0RlbmllZFwiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImFjY2Vzc0RlbmllZFwiKTtcbiAgICB9KTtcblxuICAgIHRoaXMubG9jYWxTdHJlYW0uaW5pdCgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImdldFVzZXJNZWRpYSBzdWNjZXNzZnVsbHlcIik7XG4gICAgICB0aGlzLmxvY2FsU3RyZWFtLnBsYXkoJ2Fnb3JhX2xvY2FsJyk7XG4gICAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQucHVibGlzaCh0aGlzLmxvY2FsU3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHVibGlzaCBsb2NhbCBzdHJlYW0gZXJyb3I6IFwiICsgZXJyKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdzdHJlYW0tcHVibGlzaGVkJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlB1Ymxpc2ggbG9jYWwgc3RyZWFtIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2V0VXNlck1lZGlhIGZhaWxlZFwiLCBlcnIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiR290IGVycm9yIG1zZzpcIiwgZXJyLnJlYXNvbik7XG4gICAgICBpZiAoZXJyLnJlYXNvbiA9PT0gJ0RZTkFNSUNfS0VZX1RJTUVPVVQnKSB7XG4gICAgICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5yZW5ld0NoYW5uZWxLZXkoXCJcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVuZXcgY2hhbm5lbCBrZXkgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJSZW5ldyBjaGFubmVsIGtleSBmYWlsZWQ6IFwiLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbignc3RyZWFtLWFkZGVkJywgKGV2dCkgPT4ge1xuICAgICAgY29uc3Qgc3RyZWFtID0gZXZ0LnN0cmVhbTtcbiAgICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5zdWJzY3JpYmUoc3RyZWFtLCAoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3Vic2NyaWJlIHN0cmVhbSBmYWlsZWRcIiwgZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdzdHJlYW0tc3Vic2NyaWJlZCcsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGV2dC5zdHJlYW07XG4gICAgICBpZiAoIXRoaXMucmVtb3RlQ2FsbHMuaW5jbHVkZXMoYGFnb3JhX3JlbW90ZSR7c3RyZWFtLmdldElkKCl9YCkpIHRoaXMucmVtb3RlQ2FsbHMucHVzaChgYWdvcmFfcmVtb3RlJHtzdHJlYW0uZ2V0SWQoKX1gKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3RyZWFtLnBsYXkoYGFnb3JhX3JlbW90ZSR7c3RyZWFtLmdldElkKCl9YCksIDIwMDApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdzdHJlYW0tcmVtb3ZlZCcsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGV2dC5zdHJlYW07XG4gICAgICBzdHJlYW0uc3RvcCgpO1xuICAgICAgdGhpcy5yZW1vdGVDYWxscyA9IHRoaXMucmVtb3RlQ2FsbHMuZmlsdGVyKGNhbGwgPT4gY2FsbCAhPT0gYCNhZ29yYV9yZW1vdGUke3N0cmVhbS5nZXRJZCgpfWApO1xuICAgICAgY29uc29sZS5sb2coYFJlbW90ZSBzdHJlYW0gaXMgcmVtb3ZlZCAke3N0cmVhbS5nZXRJZCgpfWApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdwZWVyLWxlYXZlJywgKGV2dCkgPT4ge1xuICAgICAgY29uc3Qgc3RyZWFtID0gZXZ0LnN0cmVhbTtcbiAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgc3RyZWFtLnN0b3AoKTtcbiAgICAgICAgdGhpcy5yZW1vdGVDYWxscyA9IHRoaXMucmVtb3RlQ2FsbHMuZmlsdGVyKGNhbGwgPT4gY2FsbCA9PT0gYCNhZ29yYV9yZW1vdGUke3N0cmVhbS5nZXRJZCgpfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtldnQudWlkfSBsZWZ0IGZyb20gdGhpcyBjaGFubmVsYCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgbGVhdmUoKSB7XG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50LmxlYXZlKCgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlQ2FsbCA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fnb3JhX2xvY2FsJykuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIGNvbnNvbGUubG9nKFwiTGVhdmVsIGNoYW5uZWwgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIH0sIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTGVhdmUgY2hhbm5lbCBmYWlsZWRcIik7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVBdWRpbygpIHtcbiAgICB0aGlzLmF1ZGlvRW5hYmxlZCA9ICF0aGlzLmF1ZGlvRW5hYmxlZDtcbiAgICBpZiAodGhpcy5hdWRpb0VuYWJsZWQpIHRoaXMubG9jYWxTdHJlYW0uZW5hYmxlQXVkaW8oKTtcbiAgICBlbHNlIHRoaXMubG9jYWxTdHJlYW0uZGlzYWJsZUF1ZGlvKCk7XG4gIH1cblxuICB0b2dnbGVWaWRlbygpIHtcbiAgICB0aGlzLnZpZGVvRW5hYmxlZCA9ICF0aGlzLnZpZGVvRW5hYmxlZDtcbiAgICBpZiAodGhpcy52aWRlb0VuYWJsZWQpIHRoaXMubG9jYWxTdHJlYW0uZW5hYmxlVmlkZW8oKTtcbiAgICBlbHNlIHRoaXMubG9jYWxTdHJlYW0uZGlzYWJsZVZpZGVvKCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFnb3JhTG9jYWxDb21wb25lbnQgfSBmcm9tICcuL2Fnb3JhLWxvY2FsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBZ29yYUNvbmZpZyB9IGZyb20gJy4vQWdvcmFDb25maWcnO1xuaW1wb3J0IHsgQW5ndWxhckFnb3JhUnRjU2VydmljZSB9IGZyb20gJy4vYW5ndWxhci1hZ29yYS1ydGMuc2VydmljZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW0Fnb3JhTG9jYWxDb21wb25lbnRdLFxuICBleHBvcnRzOiBbQWdvcmFMb2NhbENvbXBvbmVudF1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckFnb3JhUnRjTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBBZ29yYUNvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnN7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBBbmd1bGFyQWdvcmFSdGNNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtBbmd1bGFyQWdvcmFSdGNTZXJ2aWNlLCB7cHJvdmlkZTogJ2NvbmZpZycsIHVzZVZhbHVlOiBjb25maWd9XVxuICAgIH07XG4gIH1cbiB9XG4iLCJleHBvcnQgY2xhc3MgQWdvcmFDbGllbnQge1xuICAgIGFlc01vZGU6IHN0cmluZztcbiAgICBhZXNwYXNzd29yZDogc3RyaW5nO1xuICAgIGNvbmZpZ1B1Ymxpc2hlcjogYW55OyAvLyBmdW5jdGlvblxuICAgIGRpc2FibGVEdWFsU3RyZWFtOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZW5hYmxlRHVhbFN0cmVhbTogYW55OyAvLyBmdW5jdGlvblxuICAgIGdhdGV3YXlDbGllbnQ6IHt9OyAvLyBhZGQgb2JqZWN0XG4gICAgaGlnaFN0cmVhbTogYW55OyAvLyA/IHR5cGVcbiAgICBoaWdoU3RyZWFtU3RhdGU6IG51bWJlcjtcbiAgICBpbml0OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaXNEdWFsU3RyZWFtOiBib29sZWFuO1xuICAgIGpvaW46IGFueTsgLy8gZnVuY3Rpb25cbiAgICBrZXk6IGFueTsgLy8gPyBzdHJpbmdcbiAgICBsZWF2ZTogYW55OyAvLyBmdW5jdGlvblxuICAgIGxvd1N0cmVhbTogYW55OyAvLyA/XG4gICAgbG93U3RyZWFtUGFyYW1ldGVyOiBhbnkgLy8gP1xuICAgIGxvd1N0cmVhbVN0YXRlOiBudW1iZXI7XG4gICAgb246IGFueTsgLy8gZnVuY3Rpb25cbiAgICBwcm94eVNlcnZlcjogYW55OyAvLyA/XG4gICAgcHVibGlzaDogYW55OyAvLyBmdW5jdGlvblxuICAgIHJlbmV3Q2hhbm5lbEtleTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldEVuY3J5cHRpb25Nb2RlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0RW5jcnlwdGlvblNlY3JldDogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldExpdmVUcmFuc2NvZGluZzogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldExvd1N0cmVhbVBhcmFtZXRlcjogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFByb3h5U2VydmVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0UmVtb3RlVmlkZW9TdHJlYW1UeXBlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VHVyblNlcnZlcjogYW55OyAvLyBmdW5jdGlvblxuICAgIHN0YXJ0TGl2ZVN0cmVhbWluZzogYW55OyAvLyBmdW5jdGlvblxuICAgIHN0b3BMaXZlU3RyZWFtaW5nOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc3Vic2NyaWJlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgdHVyblNlcnZlcjogYW55OyAvLyBmdW5jdGlvblxuICAgIHVucHVibGlzaDogYW55OyAvLyBmdW5jdGlvblxuICAgIHVuc3Vic2NyaWJlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gIH0iLCJleHBvcnQgY2xhc3MgU3RyZWFtIHtcbiAgICBhZGRFdmVudExpc3RlbmVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgYXVkaW86IGJvb2xlYW47XG4gICAgYXVkaW9FbmFibGVkOiBib29sZWFuO1xuICAgIGF1ZGlvTGV2ZWxIZWxwZXI6IGFueSAvLyA/XG4gICAgYXV4X3N0cmVhbTogYW55OyAvLyA/XG4gICAgY2xvc2U6IGFueTsgLy8gZnVuY3Rpb24gXG4gICAgZGlzYWJsZUF1ZGlvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZGlzYWJsZVZpZGVvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZGlzcGF0Y2hFdmVudDogYW55OyAvLyBmdW5jdGlvblxuICAgIGRpc3BhdGNoU29ja2V0RXZlbnQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBkaXNwYXRjaGVyOiBhbnk7IC8vIGV2ZW50IGxpc3RlbmVyXG4gICAgZW5hYmxlQXVkaW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBlbmFibGVWaWRlbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGdldEF0dHJpYnV0ZXM6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBnZXRBdWRpb0xldmVsOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZ2V0SWQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBnZXRTdGF0czogYW55OyAvLyBmdW5jdGlvblxuICAgIGhhc0F1ZGlvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaGFzU2NyZWVuOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaGFzVmlkZW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBpbml0OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gICAgaXNBdWRpb09uOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaXNWaWRlb09uOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgbG9jYWw6IGJvb2xlYW47XG4gICAgbG93U3RyZWFtOiBhbnk7IC8vP1xuICAgIG1pcnJvcjogYm9vbGVhbjtcbiAgICBtdXRlQXVkaW86IGFueTsgLy8gP1xuICAgIG11dGVWaWRlbzogYW55OyAvLyA/XG4gICAgb246IGFueTsgLy8gZnVuY3Rpb25cbiAgICBvbkNsb3NlOiBhbnkgLy8gP1xuICAgIHBhcmFtczpcbiAgICAgICAgeyBzdHJlYW1JRDogbnVtYmVyLCBhdWRpbzogYm9vbGVhbiwgY2FtZXJhSWQ6IHN0cmluZywgbWljcm9waG9uZUlkOiBzdHJpbmcsIHZpZGVvOiBib29sZWFuIH1cbiAgICBwbGF5OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgcGxheWVyOiBhbnk7IC8vID9cbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2NyZWVuOiBib29sZWFuO1xuICAgIHNjcmVlbkF0dHJpYnV0ZXM6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG1heEZyOiBudW1iZXIsIG1pbkZyOiBudW1iZXIgfVxuICAgIHNldFNjcmVlblByb2ZpbGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb0JpdFJhdGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb0ZyYW1lUmF0ZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvUHJvZmlsZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvUHJvZmlsZUN1c3RvbTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvUHJvZmlsZUN1c3RvbVBsdXM6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb1Jlc29sdXRpb246IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzdG9wOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc3RyZWFtTGFueWwgLy8gP1xuICAgIHN0cmVhbUlkOiBudW1iZXI7XG4gICAgdW5tdXRlQXVkaW86IGFueTsgLy8gP1xuICAgIHVubXV0ZVZpZGVvOiBhbnk7IC8vID9cbiAgICB1cmw6IGFueTsgLy8/XG4gICAgdmlkZW86IGJvb2xlYW47XG4gICAgdmlkZW9FbmFibGVkOiBib29sZWFuO1xuICAgIHZpZGVvSGVpZ2h0OiBudW1iZXI7XG4gICAgdmlkZW9TaXplOiBBcnJheTxudW1iZXI+XG4gICAgdmlkZW9XaWR0aDogbnVtYmVyO1xufSIsImV4cG9ydCBjbGFzcyBEZXZpY2Uge1xuICAgIGRldmljZUlkOnN0cmluZztcbiAgICBncm91cElkOnN0cmluZztcbiAgICBraW5kOnN0cmluZztcbiAgICBsYWJlbDpzdHJpbmc7XG59Il19